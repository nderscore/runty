# Runty API Reference

* [Constructor (`runty`)](#constructor)
* [Parser (`runt`)](#parser)
* [Template Function](#template-function)
* [Runty Function](#runty-function)

------

## Constructor

Creates a new instance of the runty [parser](#parser).

```javascript
// with defaults:
const runt = runty();

// with options:
const runt = runty({
  asArray,
  fns,
  maxDepth
});
```

### Options

*   `asArray: boolean`
    * Default: `false`
    * If `true`, all templates will result in an array of strings and tokens after execution.
    * Otherwise, default stringification behavior will be used.
*   `fns: { [string: name]: RuntyFunction }`
    * Default: `{}` *(empty)*
    * Object dictionary which defines functions which will be available to templates generated by this instance of the runty parser.
    * Functions should follow the specification defined by [Runty Functions](#runty-function)

    * See [Standard Library](fns.md) and [Custom Functions](custom-fns.md) documentation for more info.
*   `maxDepth: number`
    * Default: `8`
    * Sets the maximum depth of nested logic (expressions/function calls) that will be parsed by this instance. Runty will throw an error if this depth is exceeded.

### Returns

*   [`Parser`](#parser)
    * A runty parser function.

------

## Parser

Parses a runty template and returns a compiled [template function]().

```javascript
const template = runt(templateString, asArray);
```

### Arguments

*   `templateString: string`
    * The runty [template string](syntax.md) to parse.

*   `asArray: boolean`
    * If `true`, this templates will result in an array of strings and tokens after execution.
    * Otherwise, default stringification behavior will be used.

### Returns

*   [`Template Function`](#template-function)
    * A compiled template function.

------

## Template Function

Generates a string (or array of strings and tokens) from a dictionary of values.

```javascript
const result = template(variables, asArray);
```

### Arguments

*   `variables: object | array`
    * A dictionary of values to pass as variables to the template.

*   `asArray: boolean`
    * If `true`, this templates will result in an array of strings and tokens after execution.
    * Otherwise, default stringification behavior will be used.

### Returns

*   `string | (string | any)[]`
    * Unless an `asArray` option was used, the resulting `string`.
    * If the `asArray` option was used, an array of `string` and `any` (tokens).

-------

## Runty Function

A function defined in the `fns` option passed to the constructor.

```javascript
someFn(args, variables);
```

### Arguments

*   `args: (string | any)[]`
    * An array of arguments passed to the function.
    * May be plain strings, token values, or results from other function calls.

*   `variables: object | array`
    * The dictionary of values passed to the template being executed.

### Returns

*   `any`
    * Should return some scalar or object value.
