---
title: API Reference
---

## Constructor

Creates a new instance of the runty [parser](#parser).

```javascript
// with defaults:
const runt = runty();

// with options:
const runt = runty({
  fns,
  maxDepth
});
```

### Options

*   `fns: { [string: name]: RuntyFunction }`
    * Default: `{}` *(empty)*
    * Object dictionary which defines functions which will be available to templates generated by this instance of the runty parser.
    * Functions should follow the specification defined by [Runty Functions](#runty-function)

    * See [Standard Library](fns.md) and [Custom Functions](custom-fns.md) documentation for more info.
*   `maxDepth: number`
    * Default: `8`
    * Sets the maximum depth of nested logic (expressions/function calls) that will be parsed by this instance. Runty will throw an error if this depth is exceeded.

### Returns

*   [`Parser`](#parser)
    * A runty parser function.

------

## Parser

Parses a runty template and returns a compiled [template function](#template-function).

```javascript
const template = runt(templateString, asArray);
```

### Arguments

*   `templateString: string`
    * The runty [template string](syntax.md) to parse.


*   `asArray: boolean`
    * If `true`, this templates will result in an array of strings and tokens after execution.
    * Otherwise, default stringification behavior will be used.

### Returns

*   [`Template Function`](#template-function)
    * A compiled template function.

If a template is invalid or contains syntax errors, this function will throw a [`RSyntaxError`](#rsyntaxerror)

------

## Template Function

Generates a string (or array of strings and tokens) from a dictionary of values.

```javascript
const result = template(variables);
```

### Arguments

*   `variables: object | array`
    * A dictionary of values to pass as variables to the template.

### Returns

*   `string | (string | any)[]`
    * Unless an `asArray` option was used, the resulting `string`.
    * If the `asArray` option was used, an array of `string` and `any` (tokens).

------

## RSyntaxError

`RSyntaxError` is the Error class thrown when the template parser encounters invalid syntax.

### Error Types

The following types of errors can be raised, which are exported as an object/enum `RSyntaxErrorType`

* `RSyntaxErrorType.EXPECTED_END`
* `RSyntaxErrorType.INVALID_EXPRESSION`
* `RSyntaxErrorType.INVALID_FUNCTION`
* `RSyntaxErrorType.NESTING_DEPTH`
* `RSyntaxErrorType.UNTERMINATED_EXPRESSION`
* `RSyntaxErrorType.UNTERMINATED_FUNCTION`

### Instance Properties

*   `message: string`

    Long-form syntax error message

*   `type: RSyntaxErrorType.(EXPECTED_END|INVALID_EXPRESSION|INVALID_FUNCTION|NESTING_DEPTH|UNTERMINATED_EXPRESSION|UNTERMINATED_FUNCTION)`

    The type of syntax error that was encountered.

*   `rest: string`

    The remaining unparsed template string.

*   `value: string`

    Some errors contain another value to provide additional context, such as the function name of an `INVALID_FUNCTION` error

-------

## Runty Function

A function defined in the `fns` option passed to the constructor.

```javascript
someFn(args, variables);
```

### Arguments

*   `args: (any)[]`
    * An array of arguments passed to the function.
    * May be plain strings, token values, or results from other function calls.

*   `variables: object | array`
    * The dictionary of values passed to the template being executed.

### Returns

*   `any`
    * The resulting value.
    * This may be used as a condition, as an argument to another function, or inserted into a template as a value.
