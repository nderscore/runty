"use strict";(self.webpackChunkrunty_website=self.webpackChunkrunty_website||[]).push([[377],{876:function(e,t,n){n.d(t,{Zo:function(){return l},kt:function(){return m}});var r=n(2784);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var p=r.createContext({}),u=function(e){var t=r.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):a(a({},t),e)),n},l=function(e){var t=u(e.components);return r.createElement(p.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},y=r.forwardRef((function(e,t){var n=e.components,o=e.mdxType,i=e.originalType,p=e.parentName,l=s(e,["components","mdxType","originalType","parentName"]),y=u(n),m=o,f=y["".concat(p,".").concat(m)]||y[m]||c[m]||i;return n?r.createElement(f,a(a({ref:t},l),{},{components:n})):r.createElement(f,a({ref:t},l))}));function m(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var i=n.length,a=new Array(i);a[0]=y;var s={};for(var p in t)hasOwnProperty.call(t,p)&&(s[p]=t[p]);s.originalType=e,s.mdxType="string"==typeof e?e:o,a[1]=s;for(var u=2;u<i;u++)a[u]=n[u];return r.createElement.apply(null,a)}return r.createElement.apply(null,n)}y.displayName="MDXCreateElement"},9197:function(e,t,n){n.r(t),n.d(t,{assets:function(){return p},contentTitle:function(){return a},default:function(){return c},frontMatter:function(){return i},metadata:function(){return s},toc:function(){return u}});var r=n(7896),o=(n(2784),n(876));const i={title:"TypeScript"},a=void 0,s={unversionedId:"typescript",id:"typescript",title:"TypeScript",description:"Intro",source:"@site/docs/typescript.md",sourceDirName:".",slug:"/typescript",permalink:"/docs/typescript",editUrl:"https://github.com/nderscore/runty/edit/master/packages/website/docs/typescript.md",tags:[],version:"current",frontMatter:{title:"TypeScript"},sidebar:"sidebar",previous:{title:"Standard Library (fns)",permalink:"/docs/fns"},next:{title:"Migrating from v0.1.x",permalink:"/docs/migrating-from-0-1-x"}},p={},u=[{value:"Intro",id:"intro",level:2},{value:"Typing Templates",id:"typing-templates",level:2},{value:"Typing Custom Functions",id:"typing-custom-functions",level:2}],l={toc:u};function c(e){let{components:t,...n}=e;return(0,o.kt)("wrapper",(0,r.Z)({},l,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h2",{id:"intro"},"Intro"),(0,o.kt)("p",null,"Since v0.2.0, runty has been rewritten in TypeScript and comes packaged with type definitions. In the majority of use cases, runty templates should work out of the box without any customization, unless you specifically want stronger typing or if you're defining your own custom functions."),(0,o.kt)("h2",{id:"typing-templates"},"Typing Templates"),(0,o.kt)("p",null,"Runty's template functions (",(0,o.kt)("inlineCode",{parentName:"p"},"runty.string()")," / ",(0,o.kt)("inlineCode",{parentName:"p"},"runty.array()"),") accept two generic slots, ",(0,o.kt)("inlineCode",{parentName:"p"},"V")," (the variable dictionary) and ",(0,o.kt)("inlineCode",{parentName:"p"},"R")," (return types of ",(0,o.kt)("inlineCode",{parentName:"p"},"fns"),"). "),(0,o.kt)("p",null,"The first slot allows you to constrain the type of the variable dictionary passed to your template."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-typescript"},"import { runty } from 'runty';\n\nconst template = runty<{ foo: string; }>('The thing is {%foo}');\n\ntemplate({ foo: 'something' });\n// \"The thing is something\"\n\ntemplate({ foo: 'something', bar: 'something else' });\n// type error (unknown property 'bar')\n\ntemplate();\n// type error (missing 'foo')\n")),(0,o.kt)("h2",{id:"typing-custom-functions"},"Typing Custom Functions"),(0,o.kt)("p",null,"All functions passed to ",(0,o.kt)("inlineCode",{parentName:"p"},"fns")," are expected to match the shape of ",(0,o.kt)("inlineCode",{parentName:"p"},"RuntyFunction<V, R>")," in the type definitions."),(0,o.kt)("p",null,"To write a custom runty function, import types ",(0,o.kt)("inlineCode",{parentName:"p"},"VariableDictionary")," (the default type for variable dictionaries) and ",(0,o.kt)("inlineCode",{parentName:"p"},"ReturnValues")," (the default type for what functions can return) and use the following typing:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-typescript"},"import type { ReturnValues, VariableDictionary } from 'runty';\n\nconst myCustomFn = <V extends VariableDictionary, R extends ReturnValues<V>>(\n    args: R[],\n    variables: V\n): R => {\n    // ...\n};\n")),(0,o.kt)("p",null,"See the ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/nderscore/runty/tree/master/packages/runty/src/fns"},"source code")," of our standard library fns on github for more examples."),(0,o.kt)("p",null,"If your custom function needs to return something other than a scalar value, such as dropping a react element into an array output template, you may need to customize the return values generic slot:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-tsx"},"import type { Element } from 'react';\nimport type { ReturnValues, VariableDictionary } from 'runty';\n\nconst myCustomFn = <V extends VariableDictionary, R extends ReturnValues<V> & Element>(\n    args: R[],\n    variables: V\n): Element => (<b>JSX!</b>);\n\n// VariableDictionary is the default dictionary type\nconst template = <VariableDictionary, ReturnValues<VariableDictionary> & Element>(\n    'This is my template {$myCustomFn()}',\n    { fns: { myCustomFn } }\n);\n")))}c.isMDXComponent=!0}}]);